이 디렉토리는 Java Spring 프로젝트입니다.

## 데이터베이스 전략 (H2 for Local, PostgreSQL for Production)

이 프로젝트는 개발 환경에서는 H2 데이터베이스를, 배포 환경에서는 PostgreSQL을 사용하도록 구성되어 있습니다. Flyway를 통해 각 데이터베이스에 맞는 마이그레이션 스크립트를 관리합니다.

### 마이그레이션 분리 정책

*   **PostgreSQL:** `jsonb`, `TIMESTAMPTZ`, `GENERATED ALWAYS AS IDENTITY` 등 PostgreSQL 고유의 데이터 타입을 사용합니다.
*   **H2:** `jsonb`는 `TEXT`로, `TIMESTAMPTZ`는 `TIMESTAMP`로, `GENERATED ALWAYS AS IDENTITY`는 `GENERATED BY DEFAULT AS IDENTITY` 또는 H2에 맞는 표기법으로 변환하여 사용합니다.

### 애플리케이션 실행

애플리케이션 실행 시 `spring.profiles.active` 속성을 사용하여 원하는 프로필을 활성화할 수 있습니다.

*   **로컬 개발 (H2):**
    ```bash
    ./gradlew bootRun -Dspring.profiles.active=local
    ```
*   **배포 (PostgreSQL):**
    ```bash
    ./gradlew bootRun -Dspring.profiles.active=prod
    ```

### H2 콘솔 접근

로컬 프로필로 애플리케이션을 실행한 후, 다음 주소로 H2 데이터베이스 콘솔에 접근할 수 있습니다.

*   **URL:** `http://localhost:8080/h2-console`
*   **JDBC URL:** `jdbc:h2:~/findme`
*   **User Name:** `sa` (기본값)
*   **Password:** (비워둠)

애플리케이션 기동 로그에서 Flyway가 `classpath:db/migration/h2` 경로의 마이그레이션을 실행했는지 확인할 수 있습니다.

## API 공통 사항

### 레이트리밋

*   **제한:** IP당 1분당 60요청으로 제한됩니다.
*   **제외:** `/api/health`, `/swagger-ui/**`, `/v3/api-docs/**` 경로는 레이트리밋에서 제외됩니다.
*   **초과 시 응답:** HTTP 429 (Too Many Requests) 상태 코드와 함께 다음 공통 에러 포맷으로 응답합니다.

### 에러 응답 포맷

모든 API 에러 응답은 다음 JSON 형식을 따릅니다.

```json
{
  "code": "STRING",        // 에러 코드 (예: VALIDATION_ERROR, RATE_LIMITED, INTERNAL_SERVER_ERROR)
  "message": "설명",       // 에러에 대한 간략한 설명
  "requestId": "uuid",     // 요청을 추적하기 위한 고유 ID (X-Request-Id 헤더와 동일)
  "timestamp": "ISO-8601"  // 에러 발생 시간 (ISO 8601 형식)
}
```

### 요청 ID (X-Request-Id)

모든 요청에 대해 고유한 `requestId`가 생성되어 응답 헤더 `X-Request-Id`에 포함됩니다.